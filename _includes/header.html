<!DOCTYPE html>
<html>

  <head>

    <title>{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}</title>

    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="{{ site.description | truncate: 155 }}" />

    <meta property="og:type" content="article" />
    <meta property="og:site_name" content="{{ site.title }}" />
    <meta property="og:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}" />
    <meta property="og:description" content="{{ site.description | truncate: 300 }}" />
    <meta property="og:url" content="{{ page.url | prepend: site.baseurl | prepend: site.url }}" />
    <meta property="og:image" content="{{ page.image | prepend: '/images/' | prepend: site.baseurl | prepend: site.url }}" />

    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}" />
    <meta name="twitter:description" content="{{ site.description | truncate: 200 }}" />
    <meta name="twitter:url" content="{{ page.url | prepend: site.baseurl | prepend: site.url }}" />
    <meta name="twitter:image" content="{{ page.image | prepend: '/images/' | prepend: site.baseurl | prepend: site.url }}" />
    <meta name="twitter:site" content="{{ site.twitter | prepend: '@' }}" />

    <link rel="alternate" href="{{ '/feed.xml' | prepend: site.baseurl }}" type="application/rss+xml" title="{% if page.title %}{{ page.title }}{% else %}{{ site.title }}{% endif %}" />
    <link rel="canonical" href="{{ page.url | replace: 'index.html', '' | prepend: site.baseurl }}" />

    <!-- HighlightJS -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.11.0/styles/atom-one-dark.min.css">

    <!-- Algolia -->
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.3.3/dist/instantsearch-theme-algolia.min.css">

    <link rel="stylesheet" href="{{ '/assets/normalize.css' | prepend: site.baseurl }}" />
    <link rel="stylesheet" href="{{ '/assets/animate.css' | prepend: site.baseurl }}" />
    <link rel="stylesheet" href="{{ '/assets/styles.css' | prepend: site.baseurl }}" />

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.css" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/cookieconsent2/3.1.0/cookieconsent.min.js"></script>
    <script>
    var analytics = false;
    window.addEventListener("load", function(){
    window.cookieconsent.initialise({
      "palette": {
        "popup": {
          "background": "#edeff5",
          "text": "#838391"
        },
        "button": {
          "background": "#4b81e8"
        }
      },
      "theme": "classic",
      "type": "opt-in",
      onInitialise: function (status) {
      var type = this.options.type;
      var didConsent = this.hasConsented();
      if (type == 'opt-in' && didConsent) {
        // enable cookies
        window['ga-disable-{{site.analytics}}'] = false;
        analytics = true;
      }
      if (type == 'opt-in' && !didConsent) {
        // disable cookies
        console.log('Init disabled');
        window['ga-disable-{{site.analytics}}'] = true;
        analytics = false;
      }
    },

    onStatusChange: function(status, chosenBefore) {
      var type = this.options.type;
      var didConsent = this.hasConsented();
      if (type == 'opt-in' && didConsent) {
        // enable cookies
        window['ga-disable-{{site.analytics}}'] = false;
        analytics = true;
      }
      if (type == 'opt-in' && !didConsent) {
        // disable cookies
        console.log('Init disabled');
        window['ga-disable-{{site.analytics}}'] = true;
        analytics = false;
      }
    },

    onRevokeChoice: function() {
      var type = this.options.type;
      if (type == 'opt-in' && didConsent) {
        // enable cookies
        window['ga-disable-{{site.analytics}}'] = false;
        analytics = true;
      }
      if (type == 'opt-in' && !didConsent) {
        // disable cookies
        console.log('Init disabled');
        window['ga-disable-{{site.analytics}}'] = true;
        analytics = false;
      }
    }
    })});
    </script>

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    {% if site.analytics %}
      <script>
      if(analytics == true){
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', '{{ site.analytics }}', 'auto');
        ga('send', 'pageview');
      }
      </script>
    {% endif %}

  </head>

  <body>
    {% if page.gradient and page.gradient > 0 and page.gradient < 6 %}
    	{% assign gradient = page.gradient %}
    {% else %}
    	{% assign gradient = 1 %}
    {% endif %}
    <div class="spinner-wrapper gradient-{{ gradient }}">
      <div class="spinner">
        <div class="bounce1"></div>
        <div class="bounce2"></div>
        <div class="bounce3"></div>
      </div>
    </div>

  <header  data-animation="fadeInDownBig" class="nohidden">

      {% if site.title %}<a href="{{ '/' | prepend: site.baseurl }}" class="logo">{{ site.name }}</a>{% endif %}

      {% assign pages = site.pages | sort: 'date' | where: 'navigation', true %}
      {% assign posts = site.posts | sort: 'date' | where: 'navigation', true %}

      <button class="toggle">Search</button>
      <nav>
        <ul>
          <div id="search-searchbar"></div>
          <div class="post-list" id="search-hits">
          </div>
        </div>
      </ul>
    </nav>
  </header>
